<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.2/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.min.css"/>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css">
    <link rel="stylesheet" type="text/css" href="stylesheets/user.css" />

    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
</head>
<body style="background: rgb(9, 96, 146);">
    <div style="display: flex;flex-direction: row;margin:0px 0px;padding-top: 10px;background-color: rgb(12, 78, 116);">
        <div style="width: 15%; text-align: center;">
            <img src="/images/gsecure_logo.png"  width="100px"  >
        </div>
        <div style="width:70%;text-align: center;" class="text-center">
            <h1 style="margin-top: 0px; margin-bottom: 5px; font-size:50px;font-family: Georgia, serif;color: rgba(9, 247, 255, 0.918);">Google Drive Secure</h1>
            <h2 style="margin:5px 0px 5px 0px;color: white;">Storing and retriving files securely on drive with cryptography</h2>
        </div>
        <div style="width: 15%;text-align: center;">
            <img src="/images/logo2.png"  width="100px" >
        </div>
    </div>
    <div class="wrapper">
        <!--Top menu -->
        <div class="menuPart" >
            <div class="left_part">
                <div class="profile">
                    <img class="profile_image" src="<%=pic%>" alt="profile_picture">
                    <h3 style="font-weight: bold;"><%= name %></h3>
                    <div style="padding-top: 18px;text-align: center;">
                        <a href="/logout" style="padding: 10px 10px; color:red;border: 1px solid rgb(204, 204, 204); box-sizing: 20px;font-size: 12px;">LOGOUT</a>
                    </div>
                </div>
            </div>
            <div class="file_operations">
                <div class="file_upload" >
                    <div class="well" style="margin: 7% 7%;">
                        <h3 class="text-danger"><span class="fa fa-google-plus"></span> Upload File to Google Drive </h3>
            
                        <% if (success) { %>
                        <div class="alert alert-success alert-dismissible">
                            <a href="/" class="close" data-dismiss="alert" aria-label="close"
                            >×</a
                            >
                            <strong>Success!</strong> Your Image File is Uploaded.
                        </div>
                        <%}%>

                        <% if (success_upload) { %>
                            <div class="alert alert-success alert-dismissible" style="background-color: rgb(255, 94, 94);">
                                <a href="/"  class="close" data-dismiss="alert" aria-label="close"
                                >×</a
                                >
                                <strong>Unsuccessful!</strong> Something Went Wrong.
                            </div>
                        <%}%>

                        
                        <form action="/upload" method="POST" enctype="multipart/form-data">
                            <div class="form-group">
                            <input
                                type="file"
                                class="form-control"
                                name="file"
                                required
                                id=""
                            />
                            </div>
                            <div class="form-group" style="display: flex;flex-direction: row;">
                            <input
                                style="width:49%;"
                                type="password"
                                class="form-control"
                                name="password"
                                required
                                placeholder="Enter password"
                                id="password"
                            />
                            <button style="width: 48%;margin-left: 10px;height: 35px;"  class="btn btn-block btn-danger">
                                Upload File
                            </button>
                            </div>
                        </form>
                    </div>          
                </div>
                <div class="file_download">
                    <div class="well" style="margin:7% 5%">

                        <h3 class="text-danger"><span class="fa fa-google-plus"></span> Download File From Google Drive </h3>
            
                        <% if (success_download) { %>
                        <div class="alert alert-success alert-dismissible">
                            <a href="/" class="close" data-dismiss="alert" aria-label="close"
                            >×</a
                            >
                            <strong>Success!</strong> Your Image File is Downloaded.
                        </div>
                        <%}%>

                        <% if (success_fail) { %>
                            <div class="alert alert-fail alert-dismissible" style="background-color: rgb(255, 94, 94);">
                                <a href="/" class="close" data-dismiss="alert" aria-label="close"
                                >×</a
                                >
                                <strong>Unsuccessful!</strong> check your credentials.
                            </div>
                            <%}%>

                        <form action="/download" method="POST" >
                              <div class="form-group" style="display: flex;flex-direction: row;flex-wrap: wrap;">
                                <input
                                  type="text"
                                  name="download_file"
                                  required
                                  placeholder="Enter File Id"
                                  id="download_file"
                                  
                                />
                                <input
                                  type="text"
                                  name="file_name"
                                  required
                                  placeholder="Enter File name"
                                  id="file_name"
                                  
                                />
                                <br>
                                <input
                                  type="password"
                                  name="password"
                                  placeholder="Enter Password"
                                  required
                                  id="password"
                        
                                />
                                <div style="margin-left: 5px;width: 48%;margin-bottom: 10px;" class="form-group">
                                    <button class="btn btn-block btn-danger">
                                      Download File 
                                    </button>
                                  </div>
                              </div>
                              
                          </form>

                    </div>
                </div>
            </div>
            
        </div>

        <div class="instructions">
            <div class="instructions_1">
                <div style="text-align: center;font-weight: bold;"><h2>Instructions to use Google Drive Secure</h3></div>

                <div style="width: 80%; margin: 0 auto;position: relative;padding-top: 10px;">
                    <h3>File Upload</h3>
                    <ul>
                        <li>To upload file to drive click on "Choose file" and select the file.</li>
                        <li>After that enter a key. The key will be used to encrypt your data and then stored on drive</li>
                        <li>Rember the key. If you forget the key, then you will not be able to retrive the file</li>
                    </ul>
                    <h3>File Download</h3>
                    <ul>
                        <li>While downloading file from drive enter file id, file name and your key which you used at the time of uploading</li>
                        <li>Make sure that you enter correct file id and file name. If you enter wrong information then file will not be downloaded </li>
                        <li>Downloaded files are present in your downloads folder</li>
                    </ul>
                </div>

                
                
            </div>
        </div>


        <div class="details">

            <div style="margin-top: 10px;text-align: center;font-size: 20px;padding-bottom: 20px; color:black">
                <b>List of files present in Google Drive</b>
            </div>
            
            <table class="table" style="width:100%">
                <thead>
                <tr>
                    <th  width="5%">id</th>
                    <th  width="800px">Name</th>
                    <th  width="100px">File Extension</th>
                    <th  width="100px">MimeType</th>
                    <!-- <th  width="200px">Thumbnail</th> -->
                    <th  width="200px">Web Content Link</th>
                    <th  width="200px">Web View Link</th>
                    <th  width="200px">Created Time</th>
                </tr>
                </thead>
                <tbody>
                <%if (files.length >0){ %>
                <% files.forEach(function(row){ %>
                <tr>
                    <td><%= row.id %></td>
                    <td width="800px" ><%= row.name %></td>
                    <td><%= row.fileExtension %></td>
                    <td><%= row.mimeType %></td>
                    <!-- <td><%= row.thumbnailLink %></td> -->
                    <td><a target="_blank" href="<%= row.webContentLink %>">Click here</a></td>
                    <td><a target="_blank" href="<%= row.webViewLink %>">Click here</a></td>
                    <td><%= row.createdTime %></td>
                </tr>
                <% })}else{ %>
                    <tr>
                        <td colspan="6">No Record Found</td>
                        
                    </tr>
                    <% } %>
                </tbody>
            </table>
    
            
        </div>
         


    </div>

       
  <script>

  </script>
</body>